.episode {
  @extend .vp-8;
}

// --------------
// Episode titles
// --------------

.episode-index {
  @extend .f-dsp;
  @extend .display;
  @extend .regular;
  line-height: 1;
}

.episode-title {
  @extend .display;
  @extend .bold;
  @extend .caps;
  font-size: 8vw;
  line-height: 0.8em;
  font-variation-settings: 'wdth' 350;
}

// ------
// Player
// ------

$player-button-height: 63px;
$player-playbutton-width: 72px;
$player-pausebutton-width: 76px;

.player {
  margin: var(--u4) 0 0;
}

.player-button {
  color: var(--teal);
  transition: 0.1s;
  height: $player-button-height;

  &:focus svg path {
    fill: currentColor;
  }
  &:hover {
    cursor: pointer;
    transform-origin: left bottom;
    transform: scaleX(1.3);
    transition: 0.1s;
  }
  &:active {
    transform: scaleX(1.3) scaleY(0.9);
  }
}

.player-time {
  @extend .display;
  position: absolute;
  top: 0;
  left: $player-playbutton-width;
}

.player-progress {
  position: absolute;
  top: $player-button-height/2 - 3;
  left: $player-playbutton-width;
  height: calc(var(--u1)/2);
  width: 100%;
  background-color: var(--teal);
  border-color: var(--teal);

  &:not([value]) {
    border: var(--black);
    background-color: var(--black);
  }
}

.player-progress[value]::-webkit-progress-bar {
  background-color: var(--teal);
}

.player-progress[value]::-webkit-progress-value {
  background-color: var(--pink);
}

// Background trigger

.underlay {
  position: fixed;
  height: 100vh;
  width: 100vw;
  z-index: 0;
  background-repeat: no-repeat;
  background-size: cover;
  background-color: var(--black);
}

.off {
  opacity: 0;
  transition: $transit-slow;
}

.on {
  opacity: 0.4;
  transition: $transit-slow;
}

.overlay {
  position: relative;
  top: 0;
  left: 0;
  min-height: 100%;
  min-width: 100%;
  z-index: 2;
  &::after {
    content: '';
    display: block;
    padding-bottom: 6rem; // there are magic, find out where they come from
  }
}

// ---------------
// Episode details
// ---------------

.episode-details {
  @extend .anchor;
  padding-top: var(--u2);
  & > span,
  & > label {
    @extend .display;
    padding-top: var(--u2);
    padding-bottom: var(--u2);
  }
}

// Large blocks of text

.summary,
.shownotes,
.transcript {
  opacity: 0;
  height: 0;
  overflow: hidden;
  margin: 0;
  max-width: $measure-width;
  transform: translateY(calc( -1 * var(--u2)));
  transition: opacity $transit-short, transform $transit-med;
}

// Hide/show behaviour

.tab {
  @extend .hidden;
}

.tab-label {
  @extend .anchor;
  display: inline-block;
  padding-left: var(--u4);
  padding-right: var(--u4);
  width: calc( 20 * var(--u1) );
  font-variation-settings: 'wdth' 100;
  text-align: center;
  transition: $transit-short;
  &:hover {
    cursor: pointer;
    font-variation-settings: 'wdth' 500;
    transition: $transit-short;
  }
}

.tab#tab-summary:checked ~ label[for="tab-summary"],
.tab#tab-shownotes:checked ~ label[for="tab-shownotes"], 
.tab#tab-transcript:checked ~ label[for="tab-transcript"] {
  font-variation-settings: 'wdth' 300;
  transition: $transit-med;
  &::before,&::after {
    content: url(/images/chevron.svg);
    color: inherit;
    stroke: 1px;
    position: absolute;
    top: var(--u1);
    opacity: 0.8;
  }
  &::before {
    left: var(--u1);
  }
  &::after {
    right: var(--u1);
    transform: rotateY(180deg);
  }
}

.tab#tab-summary:checked ~ .summary,
.tab#tab-shownotes:checked ~ .shownotes, 
.tab#tab-transcript:checked ~ .transcript {
  margin: var(--u2) 0;
  opacity: 1;
  transform: translateY(0);
  height: initial;
  overflow: initial;
  transition: opacity $transit-short, transform $transit-med, height $transit-short;
}

